<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="362px" preserveAspectRatio="none" style="width:660px;height:362px;background:#FFFFFF;" version="1.1" viewBox="0 0 660 362" width="660px" zoomAndPan="magnify"><defs/><g><rect fill="#ADD8E6" height="350.3281" style="stroke:#181818;stroke-width:0.5;" width="208" x="132.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="41" x="216" y="18.0669">Users</text><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="184" x2="184" y1="56.4297" y2="178.9609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="184" x2="184" y1="178.9609" y2="219.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="184" x2="184" y1="219.7656" y2="319.0313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="289" x2="289" y1="56.4297" y2="178.9609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="289" x2="289" y1="178.9609" y2="219.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="289" x2="289" y1="219.7656" y2="319.0313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="417" x2="417" y1="56.4297" y2="178.9609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="417" x2="417" y1="178.9609" y2="219.7656"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="417" x2="417" y1="219.7656" y2="319.0313"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="156.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="163.5" y="45.1279">User1</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="261.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="268.5" y="45.1279">User2</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="379.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="386.5" y="45.1279">Backend</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="156.5" y="319.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="163.5" y="339.0264">User1</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="261.5" y="319.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="268.5" y="339.0264">User2</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="379.5" y="319.0313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="386.5" y="339.0264">Backend</text><path d="M10,69.4297 L10,94.4297 L179,94.4297 L179,79.4297 L169,69.4297 L10,69.4297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M169,69.4297 L169,79.4297 L179,79.4297 L169,69.4297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="16" y="86.4966">Pixel is drawn for User1</text><polygon fill="#181818" points="405,116.6953,415,120.6953,405,124.6953,409,120.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="184" x2="411" y1="120.6953" y2="120.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="191" y="115.6294">Emit</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="136" x="224" y="115.6294">PIXEL_FROM_PLAYER</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="364" y="115.6294">event</text><path d="M422,133.6953 L422,173.6953 L653,173.6953 L653,143.6953 L643,133.6953 L422,133.6953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M643,133.6953 L643,143.6953 L653,143.6953 L643,133.6953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="428" y="150.7622">Backend stores the pixel in Redis</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="428" y="165.895">and the database</text><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="97" x="252" y="203.1714">max 100ms later</text><polygon fill="#181818" points="300,238.8984,290,242.8984,300,246.8984,296,242.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="294" x2="416" y1="242.8984" y2="242.8984"/><polygon fill="#181818" points="195,236.8984,185,240.8984,195,244.8984,191,240.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="189" x2="416" y1="240.8984" y2="240.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="201" y="235.8325">Emit</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="96" x="234" y="235.8325">UPDATE_BOARD</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="334" y="235.8325">event</text><path d="M117,253.8984 L117,278.8984 L356,278.8984 L356,263.8984 L346,253.8984 L117,253.8984 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M346,253.8984 L346,263.8984 L356,263.8984 L346,253.8984 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="123" y="270.9653">Pixel is drawn for User1 and User2</text><!--MD5=[5b72ad528973cfc10b8eadbb5634f9a7]
@startuml sequence-websockets-pixels
!pragma teoz true


box "Users" #LightBlue
skinparam ParticipantPadding 20
participant User1
participant User2
end box

note left User1
  Pixel is drawn for User1
end note

User1 - -> Backend: Emit ""PIXEL_FROM_PLAYER"" event

note right Backend
  Backend stores the pixel in Redis
  and the database
end note

...//max 100ms later//...

Backend - -> User1 & User2: Emit ""UPDATE_BOARD"" event

note over User1, User2
  Pixel is drawn for User1 and User2
end note

|||

@end

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>